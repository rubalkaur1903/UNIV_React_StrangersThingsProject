{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from'react';import{callApi}from'../util';import PostSingle from'./PostSingle';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DeletePosts=function DeletePosts(props){var posts=props.posts,setPostId=props.setPostId,token=props.token,fetchPosts=props.fetchPosts;var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(postId){var deleteResp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return callApi({method:'DELETE',url:\"/posts/\".concat(postId),token:token});case 2:deleteResp=_context.sent;_context.next=5;return fetchPosts();case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleDelete(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[token?/*#__PURE__*/_jsx(Link,{className:\"add-post-link\",to:\"/addpost\",children:\"Add Post\"}):'',/*#__PURE__*/_jsx(\"h1\",{children:\"Posts\"}),posts.map(function(post){return/*#__PURE__*/_jsxs(PostSingle,{id:\"posts\",post:post,token:token,children:[/*#__PURE__*/_jsx(Link,{to:\"/posts/\".concat(post._id),children:\"Details\"}),post.isAuthor&&/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDelete(post._id);},children:\"Delete Post\"})]},post._id);})]});};export default DeletePosts;","map":{"version":3,"sources":["/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/src/Components/DeletePost.js"],"names":["React","callApi","PostSingle","Link","DeletePosts","props","posts","setPostId","token","fetchPosts","handleDelete","postId","method","url","deleteResp","map","post","_id","isAuthor"],"mappings":"iSAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,SAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,OAASC,IAAT,KAAqB,kBAArB,C,6IAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC3B,GAAQC,CAAAA,KAAR,CAAgDD,KAAhD,CAAQC,KAAR,CAAeC,SAAf,CAAgDF,KAAhD,CAAeE,SAAf,CAA0BC,KAA1B,CAAgDH,KAAhD,CAA0BG,KAA1B,CAAiCC,UAAjC,CAAgDJ,KAAhD,CAAiCI,UAAjC,CAEA,GAAMC,CAAAA,YAAY,0FAAG,iBAAOC,MAAP,uJACQV,CAAAA,OAAO,CAAC,CAC7BW,MAAM,CAAE,QADqB,CAE7BC,GAAG,kBAAYF,MAAZ,CAF0B,CAG7BH,KAAK,CAALA,KAH6B,CAAD,CADf,QACXM,UADW,qCAMXL,CAAAA,UAAU,EANC,uDAAH,kBAAZC,CAAAA,YAAY,4CAAlB,CASA,mBAAO,2BAECF,KAAK,cAAG,KAAC,IAAD,EAAM,SAAS,CAAC,eAAhB,CAAgC,EAAE,CAAC,UAAnC,sBAAH,CAAmE,EAFzE,cAIH,6BAJG,CAMCF,KAAK,CAACS,GAAN,CAAU,SAAAC,IAAI,qBAAI,MAAC,UAAD,EAAY,EAAE,CAAC,OAAf,CAAsC,IAAI,CAAEA,IAA5C,CAAkD,KAAK,CAAER,KAAzD,wBACd,KAAC,IAAD,EAAM,EAAE,kBAAYQ,IAAI,CAACC,GAAjB,CAAR,qBADc,CAGVD,IAAI,CAACE,QAAL,eAAiB,eAAQ,OAAO,CAAE,yBAAMR,CAAAA,YAAY,CAACM,IAAI,CAACC,GAAN,CAAlB,EAAjB,yBAHP,GAA4BD,IAAI,CAACC,GAAjC,CAAJ,EAAd,CAND,GAAP,CAeH,CA3BD,CA6BA,cAAeb,CAAAA,WAAf","sourcesContent":["import React from 'react';\nimport { callApi } from '../util';\nimport PostSingle from './PostSingle';\nimport { Link } from 'react-router-dom';\n\nconst DeletePosts = (props) => {\n    const { posts, setPostId, token, fetchPosts } = props;\n\n    const handleDelete = async (postId) => {\n        const deleteResp = await callApi({\n            method: 'DELETE',\n            url: `/posts/${postId}`,\n            token\n        });\n        await fetchPosts();\n    }\n        \n    return <>\n        {\n            token ? <Link className=\"add-post-link\" to='/addpost'>Add Post</Link> : ''\n        }\n        <h1>Posts</h1>\n        {\n            posts.map(post => <PostSingle id=\"posts\" key={post._id} post={post} token={token}>\n                <Link to={`/posts/${post._id}`}>Details</Link>\n                {\n                    post.isAuthor && <button onClick={() => handleDelete(post._id)}>Delete Post</button>\n                }\n            </PostSingle>\n            )\n        }\n    </>\n}\n\nexport default DeletePosts;"]},"metadata":{},"sourceType":"module"}