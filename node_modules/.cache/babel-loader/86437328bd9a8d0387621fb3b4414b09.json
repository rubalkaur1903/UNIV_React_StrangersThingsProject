{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import{callApi}from'../util';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddPost=function AddPost(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),price=_useState4[0],setPrice=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),location=_useState8[0],setLocation=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),willDeliver=_useState10[0],setWillDeliver=_useState10[1];var token=props.token,setPosts=props.setPosts;var history=useHistory();var handleAdd=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(ev){var addPostResp,newPostResp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:ev.preventDefault();_context.next=3;return callApi({url:'/posts',method:'POST',body:{post:{title:title,price:price,description:description,location:location,willDeliver:willDeliver}},token:token});case 3:addPostResp=_context.sent;_context.next=6;return callApi({url:'/posts',token:token});case 6:newPostResp=_context.sent;setPosts(newPostResp.data.posts);setTitle('');setPrice('');setDescription('');if(newPostResp.data.posts){history.push('/posts');}case 12:case\"end\":return _context.stop();}}},_callee);}));return function handleAdd(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:token&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Add New Post\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAdd,children:[/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Title: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"*title*\",value:title,onChange:function onChange(event){setTitle(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Price: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"price\",value:price,onChange:function onChange(event){setPrice(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"description\",value:description,onChange:function onChange(event){setDescription(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Location: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"location\",value:location,onChange:function onChange(event){setLocation(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Will Deliver? \"}),/*#__PURE__*/_jsxs(\"select\",{type:\"text\",value:willDeliver,onChange:function onChange(ev){return setWillDeliver(ev.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"true\",children:\"Yes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"false\",children:\"No\"})]})]}),/*#__PURE__*/_jsx(\"fieldset\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"newpost-submit\",type:\"submit\",children:\"Submit\"})})]})]})});};export default AddPost;","map":{"version":3,"sources":["/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/src/Components/AddPosts.js"],"names":["React","useState","useHistory","callApi","AddPost","props","title","setTitle","price","setPrice","description","setDescription","location","setLocation","willDeliver","setWillDeliver","token","setPosts","history","handleAdd","ev","preventDefault","url","method","body","post","addPostResp","newPostResp","data","posts","push","event","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { callApi } from '../util';\n\nconst AddPost = (props) => {\n    const [title, setTitle] = useState('');\n    const [price, setPrice] = useState('');\n    const [description, setDescription] = useState('');\n    const [location, setLocation] = useState('')\n    const [willDeliver, setWillDeliver] = useState('')\n\n    const { token, setPosts } = props\n    const history = useHistory();\n\n    const handleAdd = async (ev) => {\n        ev.preventDefault();\n        const addPostResp = await callApi({\n            url: '/posts', \n            method: 'POST', \n            body: {\n                post: {\n                    title,\n                    price, \n                    description,\n                    location,\n                    willDeliver\n                }}, \n            token});\n            const newPostResp = await callApi({url: '/posts', token});\n            setPosts(newPostResp.data.posts);\n            setTitle('');\n            setPrice('');\n            setDescription('');\n            if(newPostResp.data.posts) {\n                history.push('/posts');\n            }\n    }\n    return <>\n    {\n        token &&\n        <div>\n            <h1>Add New Post</h1>\n            <form onSubmit={handleAdd}>\n                <fieldset>\n                    <label>Title: </label>\n                    <input type=\"text\" placeholder=\"*title*\" value={title} onChange={(event) => {setTitle(event.target.value)}}></input>\n                </fieldset>\n                <fieldset>\n                    <label>Price: </label>\n                    <input type=\"text\" placeholder=\"price\" value={price} onChange={(event) => {setPrice(event.target.value)}}></input>\n                </fieldset>\n                <fieldset>\n                    <label>Description: </label>\n                    <input type=\"text\" placeholder=\"description\" value={description} onChange={(event) => {setDescription(event.target.value)}}></input>\n                </fieldset>\n                <fieldset>\n                    <label>Location: </label>\n                    <input type=\"text\" placeholder=\"location\" value={location} onChange={(event) => {setLocation(event.target.value)}}></input>\n                </fieldset>\n                <fieldset>\n                    <label>Will Deliver? </label>\n                    <select type=\"text\" value={willDeliver} onChange={(ev) => setWillDeliver(ev.target.value)}>\n                        <option value=\"\">Select</option>\n                        <option value=\"true\">Yes</option>\n                        <option value=\"false\">No</option>\n                    </select>\n                </fieldset>\n                <fieldset>\n                    <button className=\"newpost-submit\" type=\"submit\">Submit</button>\n                </fieldset>\n            </form>\n        </div>    \n    }\n    </>\n}\n\nexport default AddPost;\n"]},"metadata":{},"sourceType":"module"}