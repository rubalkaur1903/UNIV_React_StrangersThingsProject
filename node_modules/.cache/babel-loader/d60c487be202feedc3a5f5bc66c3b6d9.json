{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useParams}from'react-router-dom';import{callApi}from'../util';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MessageForm=function MessageForm(_ref){var post=_ref.post,token=_ref.token,fetchPosts=_ref.fetchPosts;var _useParams=useParams(),postId=_useParams.postId;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),content=_useState2[0],setContent=_useState2[1];var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(ev){var messageResp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:ev.preventDefault();_context.next=3;return callApi({method:'POST',url:\"/posts/\".concat(postId,\"/messages\"),token:token,body:{message:{content:content}}});case 3:messageResp=_context.sent;setContent(messageResp.data.message.content);_context.next=7;return fetchPosts();case 7:setContent('');case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[token&&!post.isAuthor?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{value:content,placeholder:\"content\",onChange:function onChange(ev){return setContent(ev.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Send Message\"})]}):'',post.isAuthor&&post.messages.length?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{value:content,placeholder:\"content\",onChange:function onChange(ev){return setContent(ev.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Send Message\"})]}):'']});};export default MessageForm;","map":{"version":3,"sources":["/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/src/Components/MessageForm.js"],"names":["React","useState","useParams","callApi","MessageForm","post","token","fetchPosts","postId","content","setContent","handleSubmit","ev","preventDefault","method","url","body","message","messageResp","data","isAuthor","target","value","messages","length"],"mappings":"mbAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,OAAT,KAAwB,SAAxB,C,6IAGA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAA+B,IAA7BC,CAAAA,IAA6B,MAA7BA,IAA6B,CAAvBC,KAAuB,MAAvBA,KAAuB,CAAhBC,UAAgB,MAAhBA,UAAgB,CAC/C,eAAmBL,SAAS,EAA5B,CAAQM,MAAR,YAAQA,MAAR,CACA,cAA8BP,QAAQ,CAAC,EAAD,CAAtC,wCAAOQ,OAAP,eAAgBC,UAAhB,eACA,GAAMC,CAAAA,YAAY,2FAAG,iBAAOC,EAAP,kIACjBA,EAAE,CAACC,cAAH,GADiB,sBAESV,CAAAA,OAAO,CAAC,CAC9BW,MAAM,CAAE,MADsB,CAE9BC,GAAG,kBAAYP,MAAZ,aAF2B,CAG9BF,KAAK,CAALA,KAH8B,CAI9BU,IAAI,CAAE,CACFC,OAAO,CAAE,CACLR,OAAO,CAAPA,OADK,CADP,CAJwB,CAAD,CAFhB,QAEXS,WAFW,eAYjBR,UAAU,CAACQ,WAAW,CAACC,IAAZ,CAAiBF,OAAjB,CAAyBR,OAA1B,CAAV,CAZiB,sBAaXF,CAAAA,UAAU,EAbC,QAcjBG,UAAU,CAAC,EAAD,CAAV,CAdiB,sDAAH,kBAAZC,CAAAA,YAAY,6CAAlB,CAgBA,mBAAO,2BAEHL,KAAK,EAAI,CAACD,IAAI,CAACe,QAAf,cACI,cAAM,QAAQ,CAAET,YAAhB,wBACI,cAAO,KAAK,CAAEF,OAAd,CAAuB,WAAW,CAAC,SAAnC,CAA6C,QAAQ,CAAE,kBAACG,EAAD,QAAQF,CAAAA,UAAU,CAACE,EAAE,CAACS,MAAH,CAAUC,KAAX,CAAlB,EAAvD,EADJ,cAEI,eAAQ,IAAI,CAAC,QAAb,0BAFJ,GADJ,CAKM,EAPH,CAUCjB,IAAI,CAACe,QAAL,EAAiBf,IAAI,CAACkB,QAAL,CAAcC,MAA/B,cACA,cAAM,QAAQ,CAAEb,YAAhB,wBACI,cAAO,KAAK,CAAEF,OAAd,CAAuB,WAAW,CAAC,SAAnC,CAA6C,QAAQ,CAAE,kBAACG,EAAD,QAAQF,CAAAA,UAAU,CAACE,EAAE,CAACS,MAAH,CAAUC,KAAX,CAAlB,EAAvD,EADJ,cAEI,eAAQ,IAAI,CAAC,QAAb,0BAFJ,GADA,CAKE,EAfH,GAAP,CAkBH,CArCD,CAuCA,cAAelB,CAAAA,WAAf","sourcesContent":["import React, { useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { callApi } from '../util';\n\n\nconst MessageForm = ({post, token, fetchPosts}) => {\n    const { postId } = useParams();\n    const [content, setContent] = useState('');\n    const handleSubmit = async (ev) => {\n        ev.preventDefault();\n        const messageResp = await callApi({\n            method: 'POST',\n            url: `/posts/${postId}/messages`,\n            token,\n            body: {\n                message: {\n                    content\n                }\n            }\n        });\n        setContent(messageResp.data.message.content);\n        await fetchPosts()\n        setContent('');\n    }\n    return <>\n        { \n        token && !post.isAuthor ?\n            <form onSubmit={handleSubmit}>\n                <input value={content} placeholder=\"content\" onChange={(ev) => setContent(ev.target.value)}></input>\n                <button type=\"submit\">Send Message</button>\n            </form>\n            : ''\n        }\n        {\n            post.isAuthor && post.messages.length ?\n            <form onSubmit={handleSubmit}>\n                <input value={content} placeholder=\"content\" onChange={(ev) => setContent(ev.target.value)}></input>\n                <button type=\"submit\">Send Message</button>\n            </form>\n            : ''\n        }\n    </>\n}\n\nexport default MessageForm;"]},"metadata":{},"sourceType":"module"}