{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from'react';import{useHistory}from'react-router-dom';import{callApi}from'../util';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MyProfile=function MyProfile(_ref){var token=_ref.token,messages=_ref.messages,user=_ref.user,setMesaages=_ref.setMesaages;var history=useHistory();var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var messageResp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return callApi({url:'/users/me',token:token});case 2:messageResp=_context.sent;setMesaages(messageResp.data.messages);case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(){return _ref2.apply(this,arguments);};}();if(!token){history.push('/');}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Profile\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:function onSubmit(ev){ev.preventDefault();handleSubmit();},children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Click for Messages\"})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Sent Messages\"}),token?messages.map(function(message,idx){return/*#__PURE__*/_jsx(\"div\",{children:user===message.fromUser.username?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Product Title: \"}),\"\\\"\",message.post.title,\"\\\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Product ID: \"}),message.post._id]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Message Sent by Me: \"}),message.content]}),/*#__PURE__*/_jsx(\"hr\",{})]})}):''},idx);}):'',/*#__PURE__*/_jsx(\"h2\",{children:\"Received Messages\"}),token?messages.map(function(message,idx){return/*#__PURE__*/_jsx(\"div\",{children:user!==message.fromUser.username?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Product Title: \"}),\"\\\"\",message.post.title,\"\\\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Product ID: \"}),message.post._id]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Message: \"}),message.content]}),/*#__PURE__*/_jsx(\"hr\",{})]}):''},idx);}):'']});};export default MyProfile;","map":{"version":3,"sources":["/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/src/Components/MyProfile.js"],"names":["React","useHistory","callApi","MyProfile","token","messages","user","setMesaages","history","handleSubmit","url","messageResp","data","push","ev","preventDefault","map","message","idx","fromUser","username","post","title","_id","content"],"mappings":"iSAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,OAAT,KAAwB,SAAxB,C,6IAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAA2C,IAAxCC,CAAAA,KAAwC,MAAxCA,KAAwC,CAAjCC,QAAiC,MAAjCA,QAAiC,CAAvBC,IAAuB,MAAvBA,IAAuB,CAAjBC,WAAiB,MAAjBA,WAAiB,CACzD,GAAMC,CAAAA,OAAO,CAAGP,UAAU,EAA1B,CAEA,GAAMQ,CAAAA,YAAY,2FAAG,yKACSP,CAAAA,OAAO,CAAC,CAC9BQ,GAAG,CAAE,WADyB,CAE9BN,KAAK,CAALA,KAF8B,CAAD,CADhB,QACXO,WADW,eAKjBJ,WAAW,CAACI,WAAW,CAACC,IAAZ,CAAiBP,QAAlB,CAAX,CALiB,sDAAH,kBAAZI,CAAAA,YAAY,2CAAlB,CAOA,GAAG,CAACL,KAAJ,CAAW,CACPI,OAAO,CAACK,IAAR,CAAa,GAAb,EACH,CAED,mBAAO,wCACP,kCADO,cAEP,aAAM,QAAQ,CAAE,kBAACC,EAAD,CAAQ,CACpBA,EAAE,CAACC,cAAH,GACAN,YAAY,GACf,CAHD,uBAII,eAAQ,IAAI,CAAC,QAAb,gCAJJ,EAFO,cAQP,qCARO,CAUHL,KAAK,CACLC,QAAQ,CAACW,GAAT,CAAa,SAACC,OAAD,CAAUC,GAAV,CAAkB,CAC3B,mBAAO,qBAECZ,IAAI,GAAKW,OAAO,CAACE,QAAR,CAAiBC,QAA1B,cACA,sCACA,oCACI,oCAAK,sCAAL,MAA6BH,OAAO,CAACI,IAAR,CAAaC,KAA1C,SADJ,cAEI,oCAAK,mCAAL,CAAyBL,OAAO,CAACI,IAAR,CAAaE,GAAtC,GAFJ,cAGI,oCAAK,2CAAL,CAAiCN,OAAO,CAACO,OAAzC,GAHJ,cAII,aAJJ,GADA,EADA,CASE,EAXH,EAAUN,GAAV,CAAP,CAcH,CAfD,CADK,CAgBA,EA1BF,cA4BP,yCA5BO,CA8BHd,KAAK,CACLC,QAAQ,CAACW,GAAT,CAAa,SAACC,OAAD,CAAUC,GAAV,CAAkB,CAC3B,mBAAO,qBAECZ,IAAI,GAAKW,OAAO,CAACE,QAAR,CAAiBC,QAA1B,cACA,wCACI,oCAAK,sCAAL,MAA6BH,OAAO,CAACI,IAAR,CAAaC,KAA1C,SADJ,cAEI,oCAAK,mCAAL,CAAyBL,OAAO,CAACI,IAAR,CAAaE,GAAtC,GAFJ,cAGI,oCAAK,gCAAL,CAAsBN,OAAO,CAACO,OAA9B,GAHJ,cAII,aAJJ,GADA,CAOE,EATH,EAAUN,GAAV,CAAP,CAYH,CAbD,CADK,CAcA,EA5CF,GAAP,CA+CH,CA7DD,CA8DA,cAAef,CAAAA,SAAf","sourcesContent":["import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { callApi } from '../util';\n\nconst MyProfile = ({ token, messages, user, setMesaages}) => {\n    const history = useHistory();\n\n    const handleSubmit = async () => {\n        const messageResp = await callApi({\n            url: '/users/me',\n            token\n        });\n        setMesaages(messageResp.data.messages);    \n    }\n    if(!token) {\n        history.push('/')\n    }\n\n    return <>\n    <h1>My Profile</h1>\n    <form onSubmit={(ev) => {\n        ev.preventDefault();\n        handleSubmit()\n    }}>\n        <button type=\"submit\">Click for Messages</button>\n    </form>\n    <h2>Sent Messages</h2>\n    {\n        token ? \n        messages.map((message, idx) => {\n            return <div key={idx} >\n                {\n                    user === message.fromUser.username ?\n                    <>\n                    <div>\n                        <div><b>Product Title: </b>\"{message.post.title}\" </div>\n                        <div><b>Product ID: </b>{message.post._id}</div>\n                        <div><b>Message Sent by Me: </b>{message.content}</div> \n                        <hr></hr>\n                    </div>\n                    </>\n                    : ''\n                }\n            </div>\n        }) : ''\n    }\n    <h2>Received Messages</h2>\n    {\n        token ? \n        messages.map((message, idx) => {\n            return <div key={idx} >\n                {\n                    user !== message.fromUser.username ?\n                    <>\n                        <div><b>Product Title: </b>\"{message.post.title}\" </div>\n                        <div><b>Product ID: </b>{message.post._id}</div>\n                        <div><b>Message: </b>{message.content}</div> \n                        <hr></hr>\n                    </>\n                    : ''\n                }\n            </div>\n        }) : ''\n    }\n    </>        \n}\nexport default MyProfile;"]},"metadata":{},"sourceType":"module"}