{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useParams,useHistory}from'react-router';import{callApi}from'../util';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var REACT_APP_BASE_URL=process.env.REACT_APP_BASE_URL;var AccountForm=function AccountForm(_ref){var setToken=_ref.setToken,setUser=_ref.setUser;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var params=useParams();var history=useHistory();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{className:\"inputs\",onSubmit:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var loginResp,userResp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return callApi({url:\"/users/\".concat(params.method),method:'POST',body:{user:{username:username,password:password}}});case 3:loginResp=_context.sent;if(!loginResp.data){_context.next=13;break;}_context.next=7;return callApi({url:'/users/me',token:loginResp.data.token});case 7:userResp=_context.sent;setToken(loginResp.data.token);setUser(userResp.data.username);if(loginResp.data.token){history.push('/');}if(password){_context.next=13;break;}throw'wrong username or password';case 13:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}(),children:[/*#__PURE__*/_jsx(\"input\",{className:\"inputs\",type:\"text\",placeholder:\"Enter Username\",minLength:8,value:username,onChange:function onChange(event){return setUsername(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"inputs\",type:\"password\",placeholder:\"Enter Password\",minLength:8,value:password,onChange:function onChange(event){return setPassword(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-input\",type:\"submit\",children:\"Submit\"})]})});};export default AccountForm;","map":{"version":3,"sources":["/Users/rubalkaur/MyCourseWork/UNIV_React_StrangersThingsProject/src/Components/AccountForm.js"],"names":["React","useState","useParams","useHistory","callApi","REACT_APP_BASE_URL","process","env","AccountForm","setToken","setUser","username","setUsername","password","setPassword","params","history","event","preventDefault","url","method","body","user","loginResp","data","token","userResp","push","target","value"],"mappings":"mbAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,SAAT,CAAoBC,UAApB,KAAsC,cAAtC,CAEA,OAASC,OAAT,KAAwB,SAAxB,C,6IAEA,GAAQC,CAAAA,kBAAR,CAA+BC,OAAO,CAACC,GAAvC,CAAQF,kBAAR,CAEA,GAAMG,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAyB,IAAvBC,CAAAA,QAAuB,MAAvBA,QAAuB,CAAbC,OAAa,MAAbA,OAAa,CACzC,cAAgCT,QAAQ,CAAC,EAAD,CAAxC,wCAAOU,QAAP,eAAiBC,WAAjB,eACA,eAAgCX,QAAQ,CAAC,EAAD,CAAxC,yCAAOY,QAAP,eAAiBC,WAAjB,eACA,GAAMC,CAAAA,MAAM,CAAGb,SAAS,EAAxB,CACA,GAAMc,CAAAA,OAAO,CAAGb,UAAU,EAA1B,CAEA,mBAAO,sCACH,cACA,SAAS,CAAC,QADV,CAEA,QAAQ,2FAAG,iBAAOc,KAAP,yIACPA,KAAK,CAACC,cAAN,GADO,sBAGiBd,CAAAA,OAAO,CAAC,CAC5Be,GAAG,kBAAYJ,MAAM,CAACK,MAAnB,CADyB,CAE5BA,MAAM,CAAE,MAFoB,CAG5BC,IAAI,CAAE,CACFC,IAAI,CAAE,CACFX,QAAQ,CAARA,QADE,CAEFE,QAAQ,CAARA,QAFE,CADJ,CAHsB,CAAD,CAHxB,QAGDU,SAHC,mBAaHA,SAAS,CAACC,IAbP,gDAcoBpB,CAAAA,OAAO,CAAC,CAACe,GAAG,CAAE,WAAN,CAAmBM,KAAK,CAAEF,SAAS,CAACC,IAAV,CAAeC,KAAzC,CAAD,CAd3B,QAcGC,QAdH,eAeHjB,QAAQ,CAACc,SAAS,CAACC,IAAV,CAAeC,KAAhB,CAAR,CACAf,OAAO,CAACgB,QAAQ,CAACF,IAAT,CAAcb,QAAf,CAAP,CACA,GAAIY,SAAS,CAACC,IAAV,CAAeC,KAAnB,CAA0B,CACtBT,OAAO,CAACW,IAAR,CAAa,GAAb,EACH,CAnBE,GAoBEd,QApBF,+BAqBQ,4BArBR,wDAAH,+DAFR,wBA2BI,cAAO,SAAS,CAAC,QAAjB,CAA0B,IAAI,CAAC,MAA/B,CAAsC,WAAW,CAAC,gBAAlD,CAAmE,SAAS,CAAE,CAA9E,CAAiF,KAAK,CAAEF,QAAxF,CAAkG,QAAQ,CAAE,kBAACM,KAAD,QAAWL,CAAAA,WAAW,CAACK,KAAK,CAACW,MAAN,CAAaC,KAAd,CAAtB,EAA5G,EA3BJ,cA4BI,cAAO,SAAS,CAAC,QAAjB,CAA0B,IAAI,CAAC,UAA/B,CAA0C,WAAW,CAAC,gBAAtD,CAAuE,SAAS,CAAE,CAAlF,CAAqF,KAAK,CAAEhB,QAA5F,CAAsG,QAAQ,CAAE,kBAACI,KAAD,QAAWH,CAAAA,WAAW,CAACG,KAAK,CAACW,MAAN,CAAaC,KAAd,CAAtB,EAAhH,EA5BJ,cA6BI,eAAQ,SAAS,CAAC,WAAlB,CAA8B,IAAI,CAAC,QAAnC,oBA7BJ,GADG,EAAP,CAiCH,CAvCD,CAyCA,cAAerB,CAAAA,WAAf","sourcesContent":["import React, { useState } from 'react';\nimport { useParams, useHistory } from 'react-router';\n\nimport { callApi } from '../util';\n\nconst { REACT_APP_BASE_URL } = process.env;\n\nconst AccountForm = ({setToken, setUser}) => {\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const params = useParams();\n    const history = useHistory();\n\n    return <>\n        <form \n        className=\"inputs\" \n        onSubmit={ async (event) => {\n            event.preventDefault();\n\n            const loginResp = await callApi({\n                url: `/users/${params.method}`,\n                method: 'POST',\n                body: {\n                    user: {\n                        username,\n                        password\n                    }\n                }\n            });\n            if (loginResp.data) {\n                const userResp = await callApi({url: '/users/me', token: loginResp.data.token});\n                setToken(loginResp.data.token);\n                setUser(userResp.data.username)\n                if (loginResp.data.token) {\n                    history.push('/'); \n                }\n                if (!password) {\n                    throw ('wrong username or password')\n                }\n            }\n        }}>\n            <input className=\"inputs\" type=\"text\" placeholder=\"Enter Username\" minLength={8} value={username} onChange={(event) => setUsername(event.target.value)}></input>\n            <input className=\"inputs\" type=\"password\" placeholder=\"Enter Password\" minLength={8} value={password} onChange={(event) => setPassword(event.target.value)}></input>\n            <button className=\"btn-input\" type=\"submit\">Submit</button>\n        </form>\n    </>\n}\n\nexport default AccountForm;"]},"metadata":{},"sourceType":"module"}